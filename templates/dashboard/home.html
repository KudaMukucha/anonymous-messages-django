{%extends 'dashboard/base.html'%}

{%block content%}
<div class="p-5 mb-4 bg-light rounded-3">
    <div class="container-fluid py-5">
        <h1 class="display-5 fw-bold">Custom Heading</h1>
        <p class="col-md-8 fs-4">
            Let your friends write you a secret message
        </p>
        {%if request.user.is_authenticated%}
       <form class="row gy-2 gx-3 align-items-center">
            <div class="col-md-4">
                <input type="text" id="myInput" class="form-control" value="http://127.0.0.1:8000/add-anon-message/{{request.user.username}}">
            </div>
            <div class="col-auto">
                <button onclick="myFunction()" type="submit" class="btn btn-primary">Copy Link</button>
            </div>
       </form>
        {%else%}
            <p>Create an account now to receive anonymous messages from friends! <a href="{%url 'accounts:register'%}">Create Account</a> </p>
        {%endif%}
    </div>
</div>
<script>
    function myFunction() {
  // Get the text field
  var copyText = document.getElementById("myInput");

  // Select the text field
  copyText.select();
  copyText.setSelectionRange(0, 99999); // For mobile devices

   // Copy the text inside the text field
  navigator.clipboard.writeText(copyText.value);

  // Alert the copied text
  alert("Copied the text: " + copyText.value);
}
</script>
{%endblock%}